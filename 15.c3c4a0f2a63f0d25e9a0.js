(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"5zjZ":function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),o=function(){return function(){}}(),u=t("pMnS"),i=t("oBZk"),a=t("ZZ/e"),c=t("Ip0R"),r=t("gIcY"),s=t("iqUP"),b=t("ZYCi"),g=t("fvl4"),d=t("ZBkt"),p=function(){function l(l,n,t,e){this.router=l,this.firestore=n,this.afAuth=t,this.navCtrl=e,this.game={};var o=this.router.getCurrentNavigation().extras.state;try{this.gameName=o.name,this.gameId=o.ID,console.log("try ran"),localStorage.setItem("gameName",this.gameName),localStorage.setItem("gameId",this.gameId)}catch(u){null!=localStorage.getItem("gameName")&&null!=localStorage.getItem("gameId")?(this.gameName=localStorage.getItem("gameName"),this.gameId=localStorage.getItem("gameId")):this.router.navigate(["find-game"])}console.log("Game Name is "+this.gameName),null!=t.auth.currentUser?(this.user=t.auth.currentUser.email,localStorage.setItem("userEmail",this.user)):null!=localStorage.getItem("userEmail")&&null!=localStorage.getItem("userID")?this.user=localStorage.getItem("userEmail"):this.router.navigate(["login"]),console.log("this is email "+this.user)}return l.prototype.ngOnInit=function(){var l=this;console.log("scroll test"),console.log(this.content),this.firestore.collection("Games").doc(this.gameId).collection("Chat",(function(l){return l.orderBy("Time")})).snapshotChanges().subscribe((function(n){l.chatList=n.map((function(l){return{Message:l.payload.doc.data().Message,Email:l.payload.doc.data().Email,ID:l.payload.doc.id}})),null!=l.content&&(console.log("rnenfneon"),console.log(l.content),setTimeout(l.scroll,250))})),console.log("test")},l.prototype.scroll=function(){console.log("scroll"),console.log(this.content),this.content.scrollToBottom()},l.prototype.deleteBtnClick=function(l){this.docId=l,console.log(this.gameId),this.firestore.collection("Games").doc(this.gameId).collection("Chat").doc(this.docId).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(l){console.error("Error removing document: ",l)}))},l.prototype.backBtnClick=function(){this.navCtrl.navigateRoot(["game-home"],{animationDirection:"forward",state:{name:this.gameName,ID:this.gameId}})},l.prototype.sendBtnClick=function(){var l=this;console.log("sendBtn"),console.log(this.content);var n={};n.Email=this.user,n.Message=null!=this.game.Message?this.game.Message:"",n.Time=s.firestore.Timestamp.now(),console.log(n),this.firestore.collection("Games").doc(this.gameId).collection("Chat").add(n).then((function(n){l.game.Message="",console.log(n)})).catch((function(l){console.log(l)}))},l.ngInjectableDef=e.Xb({factory:function(){return new l(e.Yb(b.m),e.Yb(g.a),e.Yb(d.a),e.Yb(a.Fb))},token:l,providedIn:"root"}),l}(),m=e.zb({encapsulation:0,styles:[["input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 20px;display:inline-block;border:1px solid #7a7a7a;box-sizing:border-box;background-color:#f8f8f8}.head[_ngcontent-%COMP%]{--background:rgb(248, 248, 248)}.titl[_ngcontent-%COMP%]{color:#ec6e06;font-weight:700}.itm[_ngcontent-%COMP%]{display:block;--ion-background-color:#d8ccc2}.email[_ngcontent-%COMP%]{color:#fff}.userEmail[_ngcontent-%COMP%]{color:#ec6e06}.userLbl[_ngcontent-%COMP%]{color:#797973;font-weight:700}.lbl[_ngcontent-%COMP%]{color:#0f0f0f}.userItemCard[_ngcontent-%COMP%]{width:calc(100% - 22px);border-radius:20px;background-color:#f8f8f8;margin:10px 1px 10px 30px}.itemCard[_ngcontent-%COMP%]{width:calc(100% - 5px);border-radius:20px;background-color:#ec944b;margin:10px 30px 10px 0}.dltBtn[_ngcontent-%COMP%]{margin-left:calc(100% - 70px);--background:#ec6e06}.chatCont[_ngcontent-%COMP%]{position:fixed;height:calc(100% - 120px);overflow:scroll;width:100%;--ion-background-color:#d8ccc2}.content[_ngcontent-%COMP%]{--overflow:hidden}.cont[_ngcontent-%COMP%]{height:89px;position:fixed;width:100%;bottom:0}.subBtn[_ngcontent-%COMP%]{width:100%;margin:auto;--background:#ec6e06}.backBtn[_ngcontent-%COMP%]{position:absolute;right:5px;top:4px;height:30px;width:60px;--background:#ec6e06}"]],data:{}});function h(l){return e.Ub(0,[(l()(),e.Bb(0,0,null,null,14,"ion-card",[["class","userItemCard"]],null,null,null,i.u,i.c)),e.Ab(1,49152,null,0,a.k,[e.j,e.p,e.F],null,null),(l()(),e.Bb(2,0,null,0,12,"ion-card-header",[],null,null,null,i.s,i.d)),e.Ab(3,49152,null,0,a.m,[e.j,e.p,e.F],null,null),(l()(),e.Bb(4,0,null,0,3,"ion-card-title",[["class","userEmail"],["style","font-size: 18px"],["text-wrap",""]],null,null,null,i.t,i.e)),e.Ab(5,49152,null,0,a.o,[e.j,e.p,e.F],null,null),e.Ab(6,16384,null,0,a.c,[e.p],null,null),(l()(),e.Sb(7,0,["",""])),(l()(),e.Bb(8,0,null,0,3,"ion-label",[["class","userLbl"],["text-wrap",""]],null,null,null,i.A,i.k)),e.Ab(9,49152,null,0,a.L,[e.j,e.p,e.F],null,null),e.Ab(10,16384,null,0,a.c,[e.p],null,null),(l()(),e.Sb(11,0,["",""])),(l()(),e.Bb(12,0,null,0,2,"ion-button",[["class","dltBtn"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.deleteBtnClick(l.parent.context.$implicit.ID)&&e),e}),i.r,i.b)),e.Ab(13,49152,null,0,a.i,[e.j,e.p,e.F],null,null),(l()(),e.Sb(-1,0,[" Delete "]))],null,(function(l,n){l(n,7,0,n.parent.context.$implicit.Email),l(n,11,0,n.parent.context.$implicit.Message)}))}function f(l){return e.Ub(0,[(l()(),e.Bb(0,0,null,null,11,"ion-card",[["class","itemCard"]],null,null,null,i.u,i.c)),e.Ab(1,49152,null,0,a.k,[e.j,e.p,e.F],null,null),(l()(),e.Bb(2,0,null,0,9,"ion-card-header",[],null,null,null,i.s,i.d)),e.Ab(3,49152,null,0,a.m,[e.j,e.p,e.F],null,null),(l()(),e.Bb(4,0,null,0,3,"ion-card-title",[["class","email"],["style","font-size: 18px"],["text-wrap",""]],null,null,null,i.t,i.e)),e.Ab(5,49152,null,0,a.o,[e.j,e.p,e.F],null,null),e.Ab(6,16384,null,0,a.c,[e.p],null,null),(l()(),e.Sb(7,0,["",""])),(l()(),e.Bb(8,0,null,0,3,"ion-label",[["class","lbl"],["text-wrap",""]],null,null,null,i.A,i.k)),e.Ab(9,49152,null,0,a.L,[e.j,e.p,e.F],null,null),e.Ab(10,16384,null,0,a.c,[e.p],null,null),(l()(),e.Sb(11,0,["",""]))],null,(function(l,n){l(n,7,0,n.parent.context.$implicit.Email),l(n,11,0,n.parent.context.$implicit.Message)}))}function C(l){return e.Ub(0,[(l()(),e.Bb(0,0,null,null,5,"ion-item",[["class","itm"],["lines","none"]],null,null,null,i.z,i.j)),e.Ab(1,49152,null,0,a.F,[e.j,e.p,e.F],{lines:[0,"lines"]},null),(l()(),e.qb(16777216,null,0,1,null,h)),e.Ab(3,16384,null,0,c.j,[e.W,e.S],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(16777216,null,0,1,null,f)),e.Ab(5,16384,null,0,c.j,[e.W,e.S],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,1,0,"none"),l(n,3,0,n.context.$implicit.Email==t.user),l(n,5,0,n.context.$implicit.Email!=t.user)}),null)}function x(l){return e.Ub(0,[e.Qb(671088640,1,{content:0}),(l()(),e.Bb(1,0,null,null,10,"ion-header",[],null,null,null,i.w,i.g)),e.Ab(2,49152,null,0,a.z,[e.j,e.p,e.F],null,null),(l()(),e.Bb(3,0,null,0,8,"ion-toolbar",[["class","head"]],null,null,null,i.F,i.p)),e.Ab(4,49152,null,0,a.Ab,[e.j,e.p,e.F],null,null),(l()(),e.Bb(5,0,null,0,3,"ion-title",[["class","titl"],["text-wrap",""]],null,null,null,i.E,i.o)),e.Ab(6,49152,null,0,a.yb,[e.j,e.p,e.F],null,null),e.Ab(7,16384,null,0,a.c,[e.p],null,null),(l()(),e.Sb(8,0,[""," Chat"])),(l()(),e.Bb(9,0,null,0,2,"ion-button",[["class","backBtn"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.backBtnClick()&&e),e}),i.r,i.b)),e.Ab(10,49152,null,0,a.i,[e.j,e.p,e.F],null,null),(l()(),e.Sb(-1,0,[" Back"])),(l()(),e.Bb(12,0,null,null,19,"ion-content",[],null,null,null,i.v,i.f)),e.Ab(13,49152,null,0,a.s,[e.j,e.p,e.F],null,null),(l()(),e.Bb(14,0,null,0,5,"ion-content",[["class","chatCont"],["id","content"]],null,null,null,i.v,i.f)),e.Ab(15,49152,[[1,4],["content",4]],0,a.s,[e.j,e.p,e.F],null,null),(l()(),e.Bb(16,0,null,0,3,"ion-list",[],null,null,null,i.B,i.l)),e.Ab(17,49152,null,0,a.M,[e.j,e.p,e.F],null,null),(l()(),e.qb(16777216,null,0,1,null,C)),e.Ab(19,278528,null,0,c.i,[e.W,e.S,e.x],{ngForOf:[0,"ngForOf"]},null),(l()(),e.Bb(20,0,null,0,11,"div",[["class","cont"]],null,null,null,null,null)),(l()(),e.Bb(21,0,null,null,7,"input",[["name","message"],["placeholder","Enter Message"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var o=!0,u=l.component;return"input"===n&&(o=!1!==e.Nb(l,22)._handleInput(t.target.value)&&o),"blur"===n&&(o=!1!==e.Nb(l,22).onTouched()&&o),"compositionstart"===n&&(o=!1!==e.Nb(l,22)._compositionStart()&&o),"compositionend"===n&&(o=!1!==e.Nb(l,22)._compositionEnd(t.target.value)&&o),"ngModelChange"===n&&(o=!1!==(u.game.Message=t)&&o),o}),null,null)),e.Ab(22,16384,null,0,r.b,[e.K,e.p,[2,r.a]],null,null),e.Ab(23,16384,null,0,r.i,[],{required:[0,"required"]},null),e.Pb(1024,null,r.d,(function(l){return[l]}),[r.i]),e.Pb(1024,null,r.e,(function(l){return[l]}),[r.b]),e.Ab(26,671744,null,0,r.h,[[8,null],[6,r.d],[8,null],[6,r.e]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Pb(2048,null,r.f,null,[r.h]),e.Ab(28,16384,null,0,r.g,[[4,r.f]],null,null),(l()(),e.Bb(29,0,null,null,2,"ion-button",[["class","subBtn"],["expand","full"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.sendBtnClick()&&e),e}),i.r,i.b)),e.Ab(30,49152,null,0,a.i,[e.j,e.p,e.F],{expand:[0,"expand"]},null),(l()(),e.Sb(-1,0,["Send Message"]))],(function(l,n){var t=n.component;l(n,19,0,t.chatList),l(n,23,0,""),l(n,26,0,"message",t.game.Message),l(n,30,0,"full")}),(function(l,n){l(n,8,0,n.component.gameName),l(n,21,0,e.Nb(n,23).required?"":null,e.Nb(n,28).ngClassUntouched,e.Nb(n,28).ngClassTouched,e.Nb(n,28).ngClassPristine,e.Nb(n,28).ngClassDirty,e.Nb(n,28).ngClassValid,e.Nb(n,28).ngClassInvalid,e.Nb(n,28).ngClassPending)}))}function I(l){return e.Ub(0,[(l()(),e.Bb(0,0,null,null,1,"app-chat",[],null,null,null,x,m)),e.Ab(1,114688,null,0,p,[b.m,g.a,d.a,a.Fb],null,null)],(function(l,n){l(n,1,0)}),null)}var k=e.xb("app-chat",p,I,{},{},[]),B=function(){return function(){}}();t.d(n,"ChatPageModuleNgFactory",(function(){return A}));var A=e.yb(o,[],(function(l){return e.Kb([e.Lb(512,e.m,e.jb,[[8,[u.a,k]],[3,e.m],e.D]),e.Lb(4608,c.l,c.k,[e.z,[2,c.u]]),e.Lb(4608,r.k,r.k,[]),e.Lb(4608,a.a,a.a,[e.F,e.g]),e.Lb(4608,a.Eb,a.Eb,[a.a,e.m,e.w]),e.Lb(4608,a.Ib,a.Ib,[a.a,e.m,e.w]),e.Lb(1073742336,c.c,c.c,[]),e.Lb(1073742336,r.j,r.j,[]),e.Lb(1073742336,r.c,r.c,[]),e.Lb(1073742336,a.Cb,a.Cb,[]),e.Lb(1073742336,b.o,b.o,[[2,b.t],[2,b.m]]),e.Lb(1073742336,B,B,[]),e.Lb(1073742336,o,o,[]),e.Lb(1024,b.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);